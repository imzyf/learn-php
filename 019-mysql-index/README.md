# MySQL 高性能索引

- 大大减少服务器扫描的数据量，避免排序和临时表
- 将随机 I/O 变顺序 I/O
- 大大提高查询速度，降低写的速度，占用磁盘

## 索引类型

实现在存储引擎层

- 普通索引 没有任何约束限制
- 唯一索引 具有唯一约束性
- 主键索引 特殊唯一索引，不允许为空值
- 组合索引 多个列一起创建索引
- 外键索引 只能 InnoDB 保证一致性、级联
- 全文索引 只能 MyISAM 只能英文

主键索引与唯一索引区别：

- 一个表只能有一个主键索引（？）
- 主键可以与外键构成完整性约束，防止数据不一致

### 使用场景

- 非常小的表，大部分情况全表扫描效率更高（？）
- 特大型表，建立使用索引代价随之增加，可以用分区技术解决

## 创建原则

- 适合索引的列：where 后的列、连接子句中的列
- 索引列的基数越大，效果越好
- 对字符串进行索引，应该制定一个前缀长度，以节省索引空间
- 更具情况创建联合索引
- 避免创建过多，降低写操作效率
- 尽量选择短数据类型，减少磁盘空间

## 注意事项

**1、复合索引遵循前缀原则**

```
key(a,b,c)

可以：
where a = 1 and b = 2 and c = 3
where a =1

不行：
where b = 2
where a = 1 and c = 3
```

2、like 查询，% 不能在前

```
like '%wang%' // 索引失效
```

3、column is null 可以使用索引

4、MySQL 估计全表扫描比全表扫描慢，会放弃使用索引，优化器做的事

5、or 前的条件中的列有索引，后面的没有，索引都不会被用到

6、类型字符串，查询加引号，否则索引失效（隐式转换？）
